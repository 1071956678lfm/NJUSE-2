# NULL&NONE电影院系统详细设计描述文档

## 1. 引言

### 1.1 编制目的

本报告详细完成对电影院系统的详细设计，达到指导后续的目的

### 1.2 词汇表

|    词汇名称     | 词汇含义   | 备注               |
| :-------------: | ---------- | ------------------ |
|    audience     | 观众       |                    |
|     manager     | 经理       |                    |
|     account     | 账户       | 个人电影账户       |
|     signUp      | 注册       |                    |
|      login      | 登陆       |                    |
|       UI        | 界面       |                    |
|       BL        | 逻辑       |                    |
|       DAO       | 数据访问   | 对于数据的增删改查 |
| dataPersistence | 数据持久层 | 数据库数据         |
|     service     | 业务逻辑层 | 具体用例实现       |
|   controller    | 接口控制层 | 客户端交互实现     |

### 1.3 参考资料

1. Null And None电影院系统用例文档 V1.0
2. Null And None电影院系统需求规格说明文档 V1.0
3. Null And None电影院系统体系结构文档 V1.0
3. 丁二玉，刘钦.计算与软件工程（卷二）[M]机械工业出版2012：134—182
4. IEEE std 1471-2000

## 2. 产品描述

参考《Null And None电影院系统》和《Null And None电影院系统需求规格说明文档》中对产品的描述。

## 3. 系统结构设计概述

参考《NULL AND NONE电影院系统》和《NULL AND NONE电影院系统体系结构文档》中对系统结构的描述。

## 4. 结构视角

### 4.1 展示层的分解

##### UserUI模块

类名|功能
---|---
MainFrame | 界面Frame，负责界面的显示和界面的跳转
LoginFrame | 界面Frame，负责登录界面的显示和观众首页界面的跳转
UserUI.RefundFrame | 界面frame，负责观众退票界面的显示和跳转
UserUI.MainFrame | 界面Frame，负责观众主界面的跳转和观众的首页界面的显示
UserUI.MovieDatabaseFrame | 界面Frame，负责电影详情界面的跳转和影库信息的显示
UserUI.FastBookingFrame | 界面Frame，负责观众购票界面的跳转和观众快速购票的显示
UserUI.HelperFrame | 界面Frame，负责观众帮助导航的跳转和观众帮助的显示
UserUI.BuyVIPcardFrame | 界面Frame，负责观众付款界面的跳转和观众会员卡购买的显示
UserUI.CheckVIPcardFrame | 界面Frame，负责观众会员卡导航的跳转和观众查看会员卡相关信息页面的显示
UserUI.VIPcardCostFrame | 界面Frame，负责观众付款界面的跳转和观众会员卡购买的显示
UserUI.HomeFrame | 界面Frame，负责观众导航的跳转和观众个人中心首页的显示
UserUI.ChangeInformationFrame | 界面Frame，负责观众个人中心导航的跳转和观众修改个人信息界面的显示
UserUI.HistoryFrame | 界面Frame，负责观众个人中心导航界面的跳转和观众历史订单的显示
UserUI.CheckDiscountFrame | 界面Frame，负责观众个人中心导航界面的跳转和观众普通优惠信息的显示
UserUI.CheckMarkFrame | 界面Frame，负责观众电影详情的跳转和观众标记电影列表的显示
UserUI.MessageFrame | 界面Frame，负责观众消息界面的显示

-----------------

##### AdministerUI模块

类名 | 功能
---|---
MainFrame | 界面Frame，负责界面的显示和界面的跳转
LoginFrame | 界面Frame，负责登录界面的显示和管理员首页界面的跳转
AdministerUI.PutawayFrame|界面frame，负责管理人员管理电影排
片界面的显示和跳转
SelectFrame|界面frame，负责搜索结果到显示和影片详细信息到跳转
AdministerUI.MainFrame | 界面Frame，负责管理人员主界面的跳转和管理人员的首页界面的显示
AdministerUI.HomeFrame | 界面Frame，负责导航的跳转和管理人员的主界面的显示
AdministerUI.ScheduleFrame | 界面Frame，负责导航的跳转和管理人员管理电影排片界面的显示
AdministerUI.DiscountFrame | 界面Frame，负责导航的跳转和管理人员发布优惠信息的显示
AdministerUI.StatisticFrame | 界面Frame，负责导航的跳转和统计数据的显示

---------------

##### ManagerUI模块

类名 | 功能
---|---
MainFrame | 界面Frame，负责界面的显示和界面的跳转
LoginFrame | 界面Frame，负责登录界面的显示和经理首页界面的跳转
ManagerUI.MainFrame | 界面Frame，负责经理主界面的跳转和经理的首页界面的显示
ManagerUI.HomeFrame | 界面Frame，负责经理导航的跳转和经理的主界面的显示
ManagerUI.DiscountFrame | 界面Frame，负责导航的跳转和经理修改会员优惠策略界面的显示
ManagerUI.RefundFrame | 界面Frame，负责导航的跳转和经理修改观众退改票策略界面的显示
ManagerUI.MovieHallFrame | 界面Frame，负责导航的跳转和经理管理影厅信息界面的显示
ManagerUI.RoleFrame | 界面Frame，负责导航的跳转和经理修改影院角色界面的显示

--------------

##### ManagerUI模块

类名 | 功能
---|---
HomeFrame|总经理主界面的显示和界面的跳转
RecordUI.RecordFrame|经营情况表单查看界面
RecordUI.SaleDetailFrame|销售明细表查看界面
RecordUI.SaleHistoryFrame|经营历程表查看界面
RecordUI.SaleStateFrame|经营情况表的查看界面
PromotionUI.PromotionFrame|总经理促销策略制定的界面
PromotionUI.GiftPromotionFrame|总经理制定赠品促销策略界面
PromotionUI.TotalPromotionFrame|总经理制定总额特价促销策略界面
PromotionUI.TotalGiftPromotionFrame|总经理制定总额赠送促销策略界面
PromotionUI.CouponPromotionFrame|总经理制定代金券促销策略界面
CheckUI.CheckFrame|总经理审批单据界面

---------------

### 4.3 数据层的分解

#### 4.3.1  MovieData模块

##### 4.3.1.1 模块概述

负责电影数据的保存、增、删、改、查服务

##### 4.3.1.2 模块内部类的接口规范

   <table>
        <tr>
            <th colspan="3">提供的服务（供接口）</td>
        </tr>
        <tr>
          <th rowspan="3">MovieData.Movies.add</th>
          <td>语法</td>
          <td>public void add(movieInfoPO po)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库不存在名称、编号相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>增加一个po</td>
        </tr>
        <tr>
          <th rowspan="3">MovieData.Movies.delete</th>
          <td>语法</td>
          <td>public void delete(moiveInfoPO po)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库存在名称、编号相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>删除一个po</td>
        </tr>
        <tr>
          <th rowspan="3">MovieData.Movies.modify</th>
          <td>语法</td>
          <td>public void modify(movieInfoPO po)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库存在名称、编号相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>更新一个po</td>
        </tr>
        <tr>
          <th rowspan="3">MovieData.Movies.find</th>
          <td>语法</td>
          <td>public movieInfoPO find(String moiveID)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库存在相同id的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>根据关键字返回查找结果</td>
        </tr>
        <tr>
          <th rowspan="3">MovieData.Ticket.add</th>
          <td>语法</td>
          <td>public void add(movieTicketPO po)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库不存在名称相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>增加一个po</td>
        </tr>
        <tr>
          <th rowspan="3">MovieData.Ticket.delete</th>
          <td>语法</td>
          <td>public void delete(movieTicketPO po)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库存在名称相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>删除一个po</td>
        </tr>
        <tr>
          <th rowspan="3">MovieData.Ticket.modify</th>
          <td>语法</td>
          <td>public void modify(movieTicketPO po)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库存在名称相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>修改一个po</td>
        </tr>
        <tr>
          <th rowspan="3">MovieData.Ticket.find</th>
          <td>语法</td>
          <td>public iterator<movieTicketPO> find(String ticketID)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库中存在ID相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>返回对应的PO</td>
        </tr>
    </table>

#### 4.3.2 UserData模块

##### 4.3.2.1 模块概述

负责用户数据的保存、增、删、改、查服务

##### 4.3.2.2 模块内部类的接口规范

<table>
		<tr>
          <th rowspan="3">UserData.user.add</th>
          <td>语法</td>
          <td>public void useradd(userPo  po )</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库不存在编号、姓名相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>新增一个Po</td>
        </tr>
        <tr>
          <th rowspan="3">UserData.user.delete</th>
          <td>语法</td>
          <td>public void userdelete(userPo  po )</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库存在编号或者姓名相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>删除一个Po</td>
        </tr>
        <tr>
          <th rowspan="3">UserData.user.modify</th>
          <td>语法</td>
          <td>public userPO usermodify(userPo  po , string id )</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库存在编号或者姓名相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>修改一个Po</td>
        </tr>
        <tr>
          <th rowspan="3">UserData.user.find</th>
          <td>语法</td>
          <td>public iterator<userPo> userfind(string id )</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库存在编号或者姓名相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>返回一个Po信息</td>
        </tr>
    	<tr>
          <th rowspan="3">UserData.role.add</th>
          <td>语法</td>
          <td>public void roleadd(rolePo  po)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库不存在ID、名称相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>新增一个PO</td>
        </tr>
        <tr>
          <th rowspan="3">UserData.role.delete</th>
          <td>语法</td>
          <td>public void roledelete(rolePo  po)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库存在ID或者名称相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>删除一个PO</td>
        </tr>
        <tr>
          <th rowspan="3">UserData.role.modify</th>
          <td>语法</td>
          <td>public void rolemodify(rolePo  po , string id)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库存在ID或者名称相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>修改一个PO</td>
        </tr>
        <tr>
          <th rowspan="3">UserData.role.find</th>
          <td>语法</td>
          <td>public iterator<userPo> rolefind(string id)</td>
        </tr>
        <tr>
          <td>前置条件</td>
          <td>数据库存在ID或者名称相同的PO</td>
        </tr>
        <tr>
          <td>后置条件</td>
          <td>返回一个PO信息</td>
        </tr>
</table>

#### 4.3.3 TheaterData模块

##### 4.3.3.1 模块概述

负责电影院数据的保存、增、删、改、查服务

##### 4.3.3.2 模块内部类的接口规范

#### 4.3.4 PromotionData模块

##### 4.3.4.1 模块概述

负责商业促销数据的保存、增、删、改、查服务

##### 4.3.4.2 模块内部类的接口规范

<table>
 	<tr>
       <th rowspan="3">PromotionData.preferential.add</th>
       <td>语法</td>
       <td>public void addpreferential(preferentialPo po)</td>
    </tr>
    <tr>
       <td>前置条件</td>
       <td>数据库不存在相同的PO</td>
    </tr>
    <tr>
       <td>后置条件</td>
       <td>数据库新增一个po</td>
    </tr>
    <tr>
       <th rowspan="3">PromotionData.preferential.cancel</th>
       <td>语法</td>
       <td>public void cancelpreferential(preferentialPo po)</td>
    </tr>
    <tr>
       <td>前置条件</td>
       <td>数据库存在对应的PO</td>
    </tr>
    <tr>
       <td>后置条件</td>
       <td>数据库删除一个po</td>
    </tr>
    <tr>
       <th rowspan="3">PromotionData.preferential.find</th>
       <td>语法</td>
       <td>public void cancelpreferential(preferentialPo po)</td>
    </tr>
    <tr>
       <td>前置条件</td>
       <td>数据库存在对应的PO</td>
    </tr>
    <tr>
       <td>后置条件</td>
       <td>数据库返回一个po</td>
    </tr>	
</table>

## 5. 依赖视角
图1和图2是客户端和服务器端各自的包之间的依赖关系

图1：客户端开发包图

![](<https://raw.githubusercontent.com/1071956678lfm/NJUSE-2/master/%E6%96%87%E6%A1%A3/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2%E7%B1%BB%E5%9B%BE.png>)



图2：服务器端开发包图

![](<https://raw.githubusercontent.com/1071956678lfm/NJUSE-2/master/%E6%96%87%E6%A1%A3/img/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%BC%80%E5%8F%91%E5%8C%85%E5%9B%BE.png>)
